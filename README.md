# ACF_app
**Основной стек инструментов: Python (NumPy, SciPy, Matplotlib, Tkinter), JSON.**

*Приложение для анализа АКФ импульсных последовательностей*

**Генерация импульсных последовательностей**

Программа формирует последовательность импульсов с переменной частотой следования. Доступно пять законов изменения частоты: линейный, квадратичный, экспоненциальный, гиперболический и компенсационный (полином 4-й степени). Пользователь задает начальную и конечную частоту, длительность последовательности. Опционально включается режим линейного нарастания амплитуды импульсов от 1 до 2.

**Свертка с вейвлетом Рикера**

Сгенерированная последовательность свертывается с импульсом Рикера заданной частоты. Результат моделирует отраженный сигнал при зондировании среды. Частота вейвлета подбирается под ожидаемый частотный состав отражений.

**Вычисление автокорреляции**

Для свернутого сигнала рассчитывается автокорреляционная функция (АКФ) в окне ±500 отсчетов от нулевого лага. Вычисляются две интегральные метрики: площадь под графиком АКФ и площадь под огибающей АКФ после вычета модельного импульса. Вторая метрика характеризует степень «размазывания» энергии за счет изменения частоты следования.

**Спектральный анализ**

По АКФ строится амплитудный спектр. Определяется доминирующая частота — максимум спектральной плотности. Позволяет оценить, какая частота преобладает в автокорреляционной функции.

**Визуализация**

Четыре основных графика: импульсная последовательность (первые 5 секунд), свертка с вейвлетом (первая секунда), автокорреляция с огибающей, спектр АКФ. Отдельный график отображает выбранный закон изменения частоты во времени с формулой в углу.

---

**Окно подбора параметров частот**

**Параметры расчета.** Фиксируется частота Рикера, длительность и тип последовательности переносятся из основного окна. Пользователь может изменять длительность кнопками-стрелками, переключать закон изменения частоты и режим переменной амплитуды непосредственно в окне подбора.

**Диапазоны перебора.** Задаются минимальные, максимальные значения и шаг для начальной и конечной частоты. Расчет выполняется только для комбинаций, где начальная частота строго меньше конечной.

**Типы тепловых карт.** Доступны четыре метрики для визуализации:
- *Площадь АКФ* — интегральная энергия автокорреляционной функции
- *Центральная частота* — среднее арифметическое начальной и конечной частоты
- *Число импульсов* — количество сгенерированных ударов в последовательности
- *Площадь под огибающей АКФ* — энергия остаточной корреляции после вычета модельного импульса

**Визуализация тепловой карты.** Данные отображаются в виде цветных кружков в узлах сетки «начальная частота — конечная частота». Цвет кодирует значение выбранной метрики. При небольшом размере сетки (до 15×15) над кружками выводятся числовые значения. Справа отображается цветовая шкала с подписями.

**Управление палитрой.** Пользователь может вручную задать минимальное и максимальное значение цветовой шкалы либо вернуться к автоматическому масштабированию. Границы палитры сохраняются отдельно для каждого типа карты.

**Многопоточный расчет.** Тепловая карта строится в фоновом потоке с использованием до 8 параллельных вычислителей. Отображается окно прогресса с индикатором выполнения и кнопкой остановки расчета. При превышении 25000 точек выводится предупреждение.

**Экспорт карты.** Выгружает данные тепловой карты в текстовый файл. Формат строки: начальная частота, конечная частота, длительность, частота Рикера, значение метрики. Имя файла формируется автоматически по типу карты, закону и параметрам.

---

**Экспорт данных**

Выгружает в текстовые файлы:
- Таблицу АКФ (лаг, значение, остаток, огибающую)
- Времена ударов с частотами, периодами и амплитудами
- Результат свертки (время, амплитуда)
- Параметры сессии в JSON
- Тепловую карту в формате «начальная частота — конечная частота — значение метрики»
